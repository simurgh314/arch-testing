
#!/bin/bash
loadkeys ru
setfont cyr-sun16
timedatectl set-ntp true

(
 echo g;

 echo n;
 echo ;
 echo;
 echo +512M;

 echo t;
 echo 1;

 #echo n;
 #echo;
 #echo;
 #echo +40G;
 ##echo y;
 
  
 echo n;
 echo;
 echo;
 echo;
 #echo y;
  
 echo w;
) | fdisk /dev/sda

echo;

lsblk

mkfs.fat -F32 /dev/sda1
echo y;
mkfs.ext4  /dev/sda2
echo y;

mount /dev/sda2 /mnt
mkdir -p /mnt/{home,boot/efi}
mount /dev/sda1 /mnt/boot/efi


echo '


'
lsblk


pacstrap /mnt linux-firmware base base-devel linux linux-headers nano dhcpcd dialog wpa_supplicant grub efibootmgr
genfstab -pU /mnt >> /mnt/etc/fstab


arch-chroot /mnt


read -p "Имя компьютера --> : " hostname
read -p "Имя пользователя -->: " username
echo $hostname > /etc/hostname
ln -svf /usr/share/zoneinfo/Europe/Moscow /etc/localtime


echo "en_US.UTF-8 UTF-8" > /etc/locale.gen
echo "ru_RU.UTF-8 UTF-8" >> /etc/locale.gen 



mkinitcpio -p linux

echo '


	'
locale-gen
echo 'LANG="ru_RU.UTF-8"' > /etc/locale.conf
echo 'KEYMAP=ru' >> /etc/vconsole.conf
echo 'FONT=cyr-sun16' >> /etc/vconsole.conf


pacman -Syy
pacman -S grub efibootmgr --noconfirm 
grub-install /dev/sda
grub-mkconfig -o /boot/grub/grub.cfg

echo '
========================================
		ВВЕДИ ПАРОЛЬ АДМИНА
		
		'
passwd



useradd -m -g users -G wheel,audio,lp,optical,power,scanner,storage,video -s /bin/bash $username


echo 'Теперь введи пароль пользователя

'
passwd $username

echo '%wheel ALL=(ALL) ALL' >> /etc/sudoers

echo '[multilib]' >> /etc/pacman.conf
echo 'Include = /etc/pacman.d/mirrorlist' >> /etc/pacman.conf



pacman -Syy
pacman -S xorg-server xorg-xinit xorg-apps mesa-libgl xterm


echo '
=====================================================
ВЫТАЩИ ФЛЕШКУ И ПРЕЗАГРУЗИ КОМП. ПЕРВАЯ ЧАСТЬ ГОТОВА)










'




